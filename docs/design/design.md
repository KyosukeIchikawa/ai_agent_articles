# 設計書: 論文解説ウェブサイト AI Visual arXiv

## サイト構造設計

### 全体構成

論文解説サイトは以下の構成で設計されています：

#### 1. メインページ構成
- **ホームページ** (`/`): サイト概要とコンテンツ一覧
- **論文一覧ページ** (`/papers/`): 掲載している全論文の一覧とプレビュー
- **個別論文ページ** (`/papers/[paperId]/`): 特定の論文の概要ページ

#### 2. 論文コンテンツ構成
各論文のトップページと解説ページ
- 各論文のトップページは, その論文の全体の概要と重要ポイントをまとめた導入ページとする（論文のabstractに対応）
- 論文のセクションごとに解説ページを設ける（複数のサブセクションは1ページにまとめる）

#### 3. データフロー
- 論文データは `/src/data/papers/` ディレクトリに JSON/JS モジュール形式で保存
- 各論文のメタデータや内容はここから読み込まれてページ生成に使用
- 図表データも同様に構造化されたデータとして管理され表示時に利用

#### 4. ナビゲーション構造
- グローバルナビゲーション: 全ページ共通でアクセスできるメインセクションへのリンク
- セクションナビゲーション: 各論文セクション間の移動を可能にする前後ページリンク
- 目次ナビゲーション: 各セクション内の見出しへの直接リンク

#### 5. レスポンシブ対応
- デスクトップ、タブレット、モバイルの3段階のレイアウト切り替え
- コンテンツファーストの設計で重要な情報を優先表示

### コンポーネント構成

```
/components
├── Layout.js (共通レイアウト)
├── Navigation.js (ナビゲーション)
├── PaperHeader.js (論文ヘッダー情報)
├── SectionContainer.js (セクションコンテナ)
├── SectionHeader.js (セクションヘッダー)
├── MathEquation.js (数式レンダリング)
├── FigureWithCaption.js (図表コンポーネント)
├── ResponsiveChart.js (レスポンシブ対応チャート)
├── ClientSideChart.js (クライアントサイドレンダリングチャート)
├── AlgorithmBlock.js (アルゴリズム表示ブロック)
├── ExperimentTable.js (実験結果表示テーブル)
├── ExperimentPhaseCards.js (実験フェーズ表示カード)
├── ComparisonCard.js (比較結果表示カード)
├── ReferenceItem.js (参考文献アイテム)
├── ReferenceSection.js (参考文献セクション)
├── ScrollToTop.js (トップへ戻るボタン)
└── StartReadingButton.js (読み始めるボタン)
```

## UI/UX設計

### ナビゲーション設計
- 固定ヘッダーにグローバルナビゲーションを配置
- 各セクションへのリンクを提供
- 現在位置がわかるよう視覚的に強調
- モバイル表示時はハンバーガーメニューに切り替え
- 左サイドバーに詳細な目次を表示
- 右サイドバーに現在のセクション内の小見出しリンクを表示

### ページレイアウト
- ヘッダー: サイトタイトル、ナビゲーション
- メインコンテンツ: 論文解説、図表、数式
- 左サイドバー: グローバル目次
- 右サイドバー: 現在セクション内の目次
- フッター: 著作権表示、連絡先

### レスポンシブデザイン
- PC (1200px以上): 3カラムレイアウト（左サイドバー + メインコンテンツ + 右サイドバー）
- タブレット (768px～1199px): 2カラムレイアウト（メインコンテンツ + 右サイドバー）
- モバイル (767px以下): 1カラムレイアウト（メインコンテンツのみ）

### カラースキーム
- プライマリカラー: #3498db (青系) - ロボティクス・AIを表現
  - プライマリライト: #e8f4fd - プライマリカラーの軽量版、背景やハイライトに使用
- セカンダリカラー: #2ecc71 (緑系) - 好奇心・探索を表現
  - セカンダリライト: #e8f8f1 - セカンダリカラーの軽量版、セクション背景などに使用
- アクセントカラー: #e74c3c (赤系) - 重要概念の強調に使用
  - アクセントライト: #fceae8 - アクセントカラーの軽量版、警告や重要ポイントの背景に使用
- 背景色: #f5f5f5 (明るいグレー) - 読みやすさを確保
- テキスト色: #333333 (濃いグレー) - コントラストを確保

### タイポグラフィ
- 見出し: Roboto (sans-serif)
- 本文: Noto Sans JP (日本語対応フォント)
- コード: Source Code Pro (monospace)
- 数式: KaTeX標準フォント

## 機能設計

### コンテンツ表示機能
- セクション別ページ表示
- 数式の動的レンダリング (KaTeX使用)
  - インライン数式と独立した数式ブロックの両方をサポート
  - 数式番号の自動生成と参照機能
  - 複雑な数式も美しく表示するための最適化
- インタラクティブな図表表示
  - 静的な画像とインタラクティブなチャートの併用
  - データに基づく動的グラフ生成
  - ズーム・パン・ハイライト機能の実装
- アルゴリズム表示
  - 疑似コードの構造化表示
  - ステップごとの解説付き表示
- コードスニペット表示
  - シンタックスハイライト
  - コピー機能
- 固有名詞の表示
  - 英語表記をデフォルトとし、初出時に日本語訳を括弧書きで表示（日本の中学生レベルの英語であれば日本語訳を付けない）
  - 専門用語へのポップアップ解説（用語集連携）

### ナビゲーション機能
- スムーズスクロール
- ページ内リンク（アンカーリンク）
- パンくずリスト
- 前後のセクションへのナビゲーション
- サイドバー目次の自動更新（現在位置を表示）
- トップへ戻るボタン（スクロール位置に応じて表示/非表示）

### インタラクティブ機能
- 図表のズーム表示と詳細解説
- 実験結果の比較表示
- アルゴリズム実行の簡易デモ
- 論文参照のポップアップ表示

## 技術実装詳細

### Next.jsプロジェクト構成

```
/
├── public/ (静的ファイル)
│   ├── images/ (画像ファイル)
│   ├── fonts/ (フォントファイル)
│   └── favicon.ico
├── src/
│   ├── pages/ (ページコンポーネント)
│   │   ├── _app.js
│   │   ├── index.js
│   │   └── papers/
│   │       ├── index.js
│   │       └── [paperId]/
│   │           ├── index.js
│   │           └── [section].js
│   ├── components/ (再利用可能コンポーネント)
│   │   ├── Layout.js
│   │   ├── Navigation.js
│   │   └── ...（上記コンポーネント一覧参照）
│   ├── styles/ (スタイル定義)
│   │   ├── globals.css
│   │   └── ...
│   ├── utils/ (ユーティリティ関数)
│   │   ├── chartUtils.js
│   │   └── ...
│   ├── data/ (コンテンツデータ)
│   │   ├── papers/
│   │   │   ├── index.js
│   │   │   ├── types.js
│   │   │   └── papers/
│   │   │       └── ...（各論文データ）
│   │   ├── glossary.js (用語集データ)
│   │   └── ...
│   └── scripts/ (ユーティリティスクリプト)
│       ├── check-links.js
│       ├── convert_a_to_link.js
│       ├── remove-dark-mode.js
│       └── ...
├── docs/ (ドキュメント)
│   ├── design/
│   │   └── design.md
│   └── requirements/
│       └── requirements.md
└── 設定ファイル
    ├── next.config.js
    ├── tailwind.config.js
    ├── postcss.config.js
    └── package.json
```

### パッケージ依存関係
- next: ^14.0.0
- react: ^18.2.0
- react-dom: ^18.2.0
- katex: ^0.16.0
- react-katex: ^3.0.0
- d3: ^7.8.0
- chart.js: ^4.0.0
- react-chartjs-2: ^5.0.0
- tailwindcss: ^3.3.0（CSSフレームワーク）
- next-themes: ^0.2.0（ダークモード対応）

### データ管理
- コンテンツ: Markdownファイルとして管理し、next-mdxを使用して変換
- 用語集: JSON形式で用語と説明を管理
- 図表: SVGとCanvasを組み合わせて実装
- 数式: KaTeXを使用したクライアントサイドレンダリング

### コンポーネント詳細設計
#### MathEquation
- 目的: 数式を美しく表示する
- 技術: KaTeX
- 特徴:
  - インライン/ブロック数式の両方をサポート
  - 数式番号の自動付与
  - レスポンシブ対応（スクロール可能な横長数式）

#### FigureWithCaption
- 目的: 図表とキャプションをセットで表示
- 特徴:
  - 画像の拡大表示機能
  - レスポンシブ対応（小画面での適切なサイズ調整）
  - 画像の遅延読み込み

#### ResponsiveChart / ClientSideChart
- 目的: インタラクティブなデータ可視化
- 技術: Chart.js, D3.js
- 特徴:
  - クライアントサイドでのレンダリング
  - ウィンドウサイズに応じた自動リサイズ
  - タッチデバイス対応のインタラクション

#### AlgorithmBlock
- 目的: アルゴリズムを構造化して表示
- 特徴:
  - 行番号表示
  - 構文ハイライト
  - ステップごとの解説ポップアップ

### デプロイ設定
- GitHub Actionsを使用した自動デプロイ
- GitHub Pagesまたはvercelへのホスティング
- カスタムドメイン設定（必要に応じて）
